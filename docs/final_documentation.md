# GuardianAI - プロジェクト最終ドキュメント

## 1. プロジェクト概要

GuardianAIは、MetaMaskSDKを活用したトランザクション監視・検証システムです。ユーザーの取引を監視し、想定外のトランザクションを検知する「番犬」のような役割を果たします。ユーザーは自然言語で取引の「想定」を入力でき、GuardianAIがリアルタイムで各トランザクションを評価します。想定外の取引が検出された場合、犬の鳴き声でアラートを発し、ユーザーに確認を求めます。

### 主要機能

- MetaMaskSDKを活用したウォレット接続と認証
- トランザクションのリアルタイム監視と分析
- 自然言語による取引ルール設定
- 想定外トランザクションの検知と警告
- 犬の鳴き声アラート機能
- トークン評価機能
- ノルディックデザインのUI

## 2. システムアーキテクチャ

GuardianAIは完全にオフチェーン処理を基本とし、セルフカストディアルの原則を守るために設計されています。

### 全体アーキテクチャ

```
+------------------+     +------------------+     +------------------+
|                  |     |                  |     |                  |
|  MetaMask SDK    |<--->|  GuardianAI      |<--->|  言語モデル      |
|  (認証・署名)     |     |  (コア機能)      |     |  (意図解析)      |
|                  |     |                  |     |                  |
+------------------+     +------------------+     +------------------+
         ^                       ^                        ^
         |                       |                        |
         v                       v                        v
+------------------+     +------------------+     +------------------+
|                  |     |                  |     |                  |
|  ウォレット管理    |     |  トランザクション  |     |  アラート       |
|  コンポーネント    |     |  監視システム     |     |  システム       |
|                  |     |                  |     |                  |
+------------------+     +------------------+     +------------------+
                                 ^
                                 |
                                 v
                        +------------------+
                        |                  |
                        |  ReactNative UI  |
                        |  (ノルディック    |
                        |   デザイン)      |
                        |                  |
                        +------------------+
```

### セキュリティモデル

- プライベートキーはMetaMaskウォレット内でのみ管理
- APIキーもMetaMaskウォレット内に安全に保存
- すべての処理がクライアントサイドで完結
- サーバーは介在せず、完全にオフチェーンで動作

## 3. 技術スタック

### フロントエンド
- React Native / TypeScript
- React Native Paper (UIコンポーネント)
- Ethers.js (ブロックチェーン連携)

### MetaMask連携
- MetaMask SDK
- Web3.js

### AI/言語処理
- OpenAI GPT-4 API

### テスト
- Jest
- React Testing Library

## 4. コンポーネント詳細

### MetaMask SDK 統合

MetaMaskServiceクラスを中心に、以下の機能を提供します：

- SDK初期化と設定
- ウォレット接続・切断
- トランザクション署名と送信
- メッセージ署名
- セキュアストレージ

### トランザクション監視システム

以下のサービスで構成されています：

- TransactionMonitorService: トランザクションの監視と分析
- RuleProcessorService: ユーザー定義ルールの処理
- TransactionApprovalService: トランザクションの承認/拒否フロー

### 言語モデル統合

LanguageModelServiceが以下の機能を提供します：

- ユーザー意図の解析
- 自然言語からルール条件への変換
- トークン評価
- トランザクション説明生成

### アラートシステム

AlertServiceとNotificationSystemが連携し、以下の機能を提供します：

- 通知管理
- 犬の鳴き声アラート
- ユーザーフィードバック収集

### UIコンポーネント

ノルウェー・スウェーデン風のノルディックデザインを採用し、以下のコンポーネントで構成されています：

- ダッシュボード
- ウォレット接続
- トランザクション監視
- 意図入力
- 通知システム
- 設定画面

## 5. データフロー

### ユーザー意図の処理フロー

1. ユーザーが自然言語で取引の「想定」を入力
2. LanguageModelServiceが意図を解析
3. RuleProcessorServiceがルールセットを生成
4. ルールセットが保存され、トランザクション評価に使用

### トランザクション監視フロー

1. TransactionMonitorServiceがトランザクションを検知
2. トランザクションタイプと内容を分析
3. RuleProcessorServiceがユーザー定義ルールと照合
4. 結果に基づいてTransactionApprovalServiceが承認/拒否を判断
5. 想定外の場合、AlertServiceが犬の鳴き声アラートを発生

## 6. セキュリティ考慮事項

- プライベートキーはMetaMaskウォレット内でのみ管理され、アプリケーションからはアクセス不可
- APIキーはMetaMaskのセキュアストレージ機能を使用して保存
- すべての重要な操作はユーザーの明示的な承認が必要
- オフチェーン処理を基本とし、中央サーバーへの依存を排除

## 7. パフォーマンス最適化

- トランザクションリストの仮想化によるメモリ使用量の最適化
- 言語モデルAPIリクエストのキャッシュ
- 非同期処理の適切な管理によるUI応答性の確保

## 8. テスト戦略

- ユニットテスト: 各サービスとコンポーネントの個別テスト
- 統合テスト: コンポーネント間の連携テスト
- パフォーマンステスト: 大量データ処理時の挙動確認
- ユーザビリティテスト: エラー状態からの回復など

## 9. 将来の拡張性

GuardianAIは以下の方向への拡張が可能です：

- 複数のウォレットプロバイダー対応
- より高度なAI分析機能の追加
- カスタムルールテンプレートの提供
- コミュニティベースのルール共有機能
- 分散型ストレージとの連携

## 10. インストールと実行方法

### 前提条件
- Node.js v14以上
- npm v6以上
- MetaMaskウォレット

### インストール手順

```bash
# リポジトリのクローン
git clone https://github.com/yourusername/guardian-ai.git
cd guardian-ai

# 依存関係のインストール
npm install

# 開発サーバーの起動
npm start
```

### ビルド手順

```bash
# Androidビルド
npm run android

# iOSビルド
npm run ios
```

## 11. 使用方法

1. アプリを起動し、「ウォレットを接続」ボタンをクリック
2. MetaMaskウォレットで接続を承認
3. 「取引の意図」セクションで自然言語で取引ルールを入力（例: 「今日はスワップだけしたい」）
4. 「解析」ボタンをクリックしてルールを設定
5. トランザクション監視が自動的に開始され、想定外の取引があれば犬の鳴き声でアラート

## 12. まとめ

GuardianAIは、MetaMaskSDKを中核に据え、オフチェーン処理を基本としたセキュアなトランザクション監視システムです。自然言語処理による直感的な操作と、犬の鳴き声アラートによる独自性を兼ね備えています。セルフカストディアルの原則を守りながら、ユーザーに安心と使いやすさを提供します。

---

© 2025 GuardianAI Team
